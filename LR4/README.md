# Практична робота №4: Дослідження обмежень ресурсів у середовищі Docker


**Виконав:** Максим
**Група:** ТВ-43

Дана робота присвячена вивченню механізмів обмеження системних ресурсів процесу за допомогою утиліти `ulimit` у Docker-контейнерах. Досліджуються м'які (Soft) та жорсткі (Hard) ліміти на кількість відкритих файлів, час ЦП та розміри файлів.

---

## Завдання 4.1: 
Запустіть Docker-контейнер і поекспериментуйте з максимальним лімітом ресурсів відкритих файлів. Для цього виконайте команди у вказаному порядку:

Було проведено експерименти зі зміною лімітів на кількість одночасно відкритих файлів у середовищі Docker.

### Основні результати:

![](Task1/1.png)
![](Task1/2.png)
---
## Завдання 4.2: 
У Docker-контейнері встановіть утиліту perf(1). Поекспериментуйте з досягненням процесом встановленого ліміту.
![](Task2/1.png)
---

## Завдання 4.3:
Напишіть програму, що імітує кидання шестигранного кубика. Імітуйте кидки, результати записуйте у файл, для якого попередньо встановлено обмеження на його максимальний розмір (max file size). Коректно обробіть ситуацію перевищення ліміту.
![](Task4/1.png)
---

## Завдання 4.4:
Напишіть програму, що імітує лотерею, вибираючи 7 різних цілих чисел у діапазоні від 1 до 49 і ще 6 з 46. Встановіть обмеження на час ЦП (max CPU time) і генеруйте результати вибору чисел (7 із 49, 6 із 46). Обробіть ситуацію, коли ліміт ресурсу вичерпано.
![](Task4/1.png)
---

## Завдання 4.5: 
Напишіть програму для копіювання одного іменованого файлу в інший. Імена файлів передаються у вигляді аргументів.
Програма має:
перевіряти, чи передано два аргументи, інакше виводити "Program need two arguments";
перевіряти доступність першого файлу для читання, інакше виводити "Cannot open file .... for reading";
перевіряти доступність другого файлу для запису, інакше виводити "Cannot open file .... for writing";
обробляти ситуацію перевищення обмеження на розмір файлу.
![](Task5/1.png)
---

## Завдання 4.6: 
Напишіть програму, що демонструє використання обмеження (max stack segment size). Підказка: рекурсивна програма активно використовує стек.
![](Task6/1.png)
---

## Завдання 4.6: 
Напишіть програму, що демонструє використання обмеження (max stack segment size). Підказка: рекурсивна програма активно використовує стек.
![](Task7/1.png)

## Індивідуальне завдання (Варіант №12)
[cite_start]**Тема: Дослідження обмеження динамічної пам’яті процесу (`ulimit -d`)**[cite: 244].

* **Завдання**: Перевірити, як змінюється program break через sbrk(0) після серії малих алокацій.
* **Результат**: ППочаткова межа 0x6134ca502000 після 100 викликів malloc(3) змістилася до 0x6134ca523000. Незважаючи на те, що сумарно було запитано лише 300 байт, межа змістилася на 0x21000 байт. Це підтверджує стратегію glibc malloc: бібліотека запитує у ядра пам'ять великими блоками (сторінками), щоб мінімізувати кількість системних викликів, і самостійно розподіляє її під дрібні потреби процесу.
![](Task12/1.png)
---

## Висновок:
Вивчено алгоритми роботи malloc, free та realloc і їхню взаємодію з ядром через системні виклики brk/sbrk. Досліджено стратегію алокації сторінками пам'яті та зміну program break при роботі з кучею. Навченося запобігати витокам пам'яті та помилкам переповнення цілих чисел при алокації.
